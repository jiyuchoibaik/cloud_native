# pet-diary-app/frontend/nginx/nginx.conf

server {
    listen 80;

    # Nginx가 React 빌드 파일을 찾을 루트 폴더
    root /usr/share/nginx/html;

    # 기본 파일 지정
    index index.html index.htm;

    # 1. /api/ 또는 /static/ 같은 특정 경로는 그대로 처리
    # (이 예제에서는 필요 없지만, 좋은 습관입니다)

    # 2. 그 외 모든 요청 (React Router 처리)
    location / {
        # 요청된 파일/폴더($uri)가 있으면 그것을 사용
        # 없으면 index.html을 대신 반환 (React가 라우팅 처리)
        try_files $uri $uri/ /index.html;
    }

    # (옵션) gzip 압축으로 로딩 속도 향상
    gzip on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types text/plain text/css text/xml application/json application/javascript application/xml+rss text/javascript;
}